<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1" /><meta property="og:locale" content="en" /><meta name="description" content="Vue.js와 Spring boot에서 JWT 기반 로그인을 구현한 과정을 소개한다." /><meta property="og:description" content="Vue.js와 Spring boot에서 JWT 기반 로그인을 구현한 과정을 소개한다." /><link rel="canonical" href="https://scribnote5.github.io/posts/Project-SW-Test-Forum4/" /><meta property="og:url" content="https://scribnote5.github.io/posts/Project-SW-Test-Forum4/" /><meta property="og:site_name" content="끄적이판" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-08-08T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1" /><meta name="twitter:site" content="@" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"Vue.js와 Spring boot에서 JWT 기반 로그인을 구현한 과정을 소개한다.","url":"https://scribnote5.github.io/posts/Project-SW-Test-Forum4/","headline":"Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1","@type":"BlogPosting","dateModified":"2021-08-08T00:00:00+09:00","datePublished":"2021-08-08T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://scribnote5.github.io/posts/Project-SW-Test-Forum4/"},"@context":"https://schema.org"}</script><title>Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1 | 끄적이판</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="끄적이판"><meta name="application-name" content="끄적이판"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/banners/home.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">끄적이판</a></div><div class="site-subtitle font-italic">지금까지 공부한 것을 끄적이는 블로그</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/scribnote5" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['scribnote5','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/daeyoung-song-175486167" aria-label="linkedin" class="order-6" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> scribnote5 </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Aug 8, 2021, 12:00 AM +0900" >Aug 8, 2021<i class="unloaded">2021-08-08T00:00:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Aug 8, 2021, 12:00 AM +0000" >Aug 8, 2021<i class="unloaded">2021-08-08T00:00:00+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2550 words">14 min read</span></div></div><div class="post-content"><ul><li>Vue.js와 Spring boot에서 JWT 기반 로그인을 구현한 과정을 소개한다.<li>github: <a href="https://github.com/scribnote5/sw_test_forum">https://github.com/scribnote5/sw_test_forum</a></ul><h2 id="jwtjson-web-token란">JWT(JSON Web Token)란?</h2><ul><li>JSON 포맷에 사용자 인증정보를 저장하는 토큰이다. JWT를 사용하여 토큰 기반 사용자 인증 시스템 즉 로그인을 구현할 수 있다.<li>인프런 Spring Boot JWT Tutorial 인강을 기반으로 개발하였다.</ul><p>출처: <a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-jwt">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-jwt</a></p><h3 id="jwt과-세션-인증-방법과-비교">JWT과 세션 인증 방법과 비교</h3><ul><li>로그인 중인 사용자의 수가 많아지면 시스템에 과부하가 발생한다. 로그인한 사용자가 많아지면 메모리를 많이 사용하게 되기 때문이다.<li>서버 확장에 유리하다. 분산 시스템을 설계하는 경우, 세션 정보를 다른 프로세스간 동기화 하는 과정이 어렵다.</ul><p>출처: <a href="https://backend-intro.vlpt.us/4/">https://backend-intro.vlpt.us/4/</a></p><h2 id="jwt는-어디에-저장해야-하는가">JWT는 어디에 저장해야 하는가?</h2><ul><li>두 방식 모두 보안에 완벽한 것은 없다.<li>취약점을 보완한다고 하면 cookie에 저장하는 방식이 local storage에 저장하는 방식보다 더 안전하다고 생각한다.<li>많은 개발자들이 JWT 토큰을 cookie에 저장하는 방식을 사용하고 있다.<li>클라이언트 뿐만 아니라 서버에서 추가적으로 XSS 취약점을 보완해야 한다.</ul><h3 id="html-web-storagelocal-storage">HTML Web Storage(Local Storage)</h3><ul><li><p>브라우저에 데이터를 저장하는 방법이다.</p><li><p>XSS 취약점이 존재한다. -&gt; 프론트엔드 프레임워크에서 XSS 취약점을 예방하기 위한 방법을 제공한다. 그러나 완벽하지 않다.</p></ul><h3 id="cookie">Cookie</h3><ul><li><p>브라우저에 쿠키로 저장하는 방법으로, HTTP 요청을 보낼 때 마다 자동으로 쿠키가 서버에 전송된다.</p><li>XSS 취약점이 존재한다. -&gt; httpOnly 옵션을 추가하여 서버에 쿠키를 저장하면, 클라이언트는 쿠키에 접근할 수 없다. 또한 secure 옵션을 추가하면 https를 통해서만 접근 가능하다. 해당 옵션들은 클라이언트가 아닌 서버에서 설정한다. 그러나 완벽하지 않다.<li>CSRF 취약점이 존재한다. -&gt; CSRF 위조를 검사하는 토큰을 사용한다.</ul><h3 id="나의-결론">나의 결론?</h3><ul><li>Local Storage는 Cookie 보다 사용하기 편하지만, 결국 Cookie를 선택하게 되었다.<li>Cookie의 경우 CSRF 토큰을 사용하면 CSRF 취약점을 보완 할 수 있다.<li>Cookie에 httpOnly 옵션과 secure 옵션을 추가하여도 XSS 공격을 보완 할 수 없다. 그러나 Local Storage 보다 조금 더 보안에 유리하기 때문에 Cookie를 선택하였다. 자세한 내용은 하단 출처를 참고하였다.</ul><blockquote><ul><li>Conclusion<li>Although cookies still have some vulnerabilities, it’s preferable compared to localStorage whenever possible. Why?<li>Both localStorage and cookies are vulnerable to XSS attacks but it’s harder for the attacker to do the attack when you’re using httpOnly cookies.<li>Cookies are vulnerable to CSRF attacks but it can be mitigated using sameSite flag and anti-CSRF tokens.<li>You can still make it work even if you need to use the Authorization: Bearer header or if your JWT is larger than 4KB. This is also consistent with the recommendation from the OWASP community:</ul></blockquote><p>출처: <a href="https://dev.to/cotter/localstorage-vs-cookies-all-you-need-to-know-about-storing-jwt-tokens-securely-in-the-front-end-15id">https://dev.to/cotter/localstorage-vs-cookies-all-you-need-to-know-about-storing-jwt-tokens-securely-in-the-front-end-15id</a><br /> <a href="https://velog.io/@0307kwon/JWT%EB%8A%94-%EC%96%B4%EB%94%94%EC%97%90-%EC%A0%80%EC%9E%A5%ED%95%B4%EC%95%BC%ED%95%A0%EA%B9%8C-localStorage-vs-cookie">https://velog.io/@0307kwon/JWT%EB%8A%94-%EC%96%B4%EB%94%94%EC%97%90-%EC%A0%80%EC%9E%A5%ED%95%B4%EC%95%BC%ED%95%A0%EA%B9%8C-localStorage-vs-cookie</a><br /> <a href="https://mygumi.tistory.com/375">https://mygumi.tistory.com/375</a></p><h2 id="jwt-토큰-연장-방식">JWT 토큰 연장 방식</h2><ul><li>Access Token의 만료 시간이 짧은 경우, 보안에는 유리하지만 자주 로그인을 해야하는 단점이 있다.</ul><h3 id="sliding-session">Sliding Session</h3><ul><li>이러한 보안과 편의성을 모두 해결할 수 있는 방법으로 Sliding Session 전략이 있다. 해당 방식은 특정 페이지에 접속하는 경우, Access Token을 새로 발급하여 로그인 기간을 연장하는 방식이다.</ul><h3 id="refresh-token">Refresh Token</h3><ul><li>다른 방식으로는 Refresh Token 전략이 있다. 해당 방식은 처음 로그인할 때 Access Token과 Refresh Token을 발급한다. 만약 Access Token이 만료되는 경우 Refresh Token을 사용하여 Access Token을 새로 발급한다. Refresh Token은 Access Token 보다 더 긴 만료 기간을 부여한다.</ul><h3 id="나의-결론-1">나의 결론?</h3><ul><li>두 방식을 적용하지 않았다.<li>Access Token의 만료 기간을 1일로 정하였으며, 이는 로그인이 유지되는 충분한 기간으로 판단하여 Sliding Session 전략을 사용하지 않았다.<li>Refresh Token 전략의 필요성에 대하여 의문이 존재한다. Refresh Token은 Access Token을 발급 받기 위해 사용되므로, Refresh Token 역시 보안이 굉장히 중요하다. Refresh Token을 Cookie에 저장하든 Local Storage에 저장하든 보안 취약점이 발생하는데, 이를 공격하여 Access Token을 얻을 수 있기 때문이다.<li>OAuth2 제공자 중 Refresh Token을 사용하지 않는 제공자(github, foursquare)도 존재한다.</ul><p>출처: <a href="https://zzossig.io/posts/etc/what_is_the_point_of_refresh_token/">https://zzossig.io/posts/etc/what_is_the_point_of_refresh_token/</a><br /> <a href="https://velog.io/@insutance/JWT-token-%EB%A7%8C%EB%A3%8C">https://velog.io/@insutance/JWT-token-%EB%A7%8C%EB%A3%8C</a><br /> <a href="https://blog.ull.im/engineering/2019/02/07/jwt-strategy.html">https://blog.ull.im/engineering/2019/02/07/jwt-strategy.html</a></p><h2 id="spring-boot에서-jwt-구현">Spring boot에서 JWT 구현</h2><ul><li>Spring boot에서 JWT를 발급하는 기본 로직은 하단 출처를 참고하여 개발하였다.</ul><p>출처: <a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-jwt">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-jwt</a></p><h2 id="spring-boot에서-jwt-구현---수정">Spring boot에서 JWT 구현 - 수정</h2><ul><li>Access Token을 Cookie에 저장하도록 수정하였으며, 이로 인해 발생하는 문제점을 보완 하기 위해서 다음 항목 별로 코드를 수정 및 보완 하였다.</ul><h3 id="cookie-httponly">Cookie httpOnly</h3><ul><li>httpOnly 옵션을 추가하여 서버에서 쿠키를 저장하면, 클라이언트는 쿠키에 접근할 수 없다.<li>처음 인증할 때 Access Token를 쿠키에 저장하여 응답한다면, HTTP 통신을 할 때 자동으로 Set-Cookie 헤더에 Access Token이 저장된다.<li>쿠키 보안 문제를 해결하기 위해 만들어진 Samsite 쿠키는 None, Lax, Strict 정책이 있다. Samsite 쿠키는 서로 다른 도메인 간 쿠키를 전송하는 옵션으로, 같은 도메인을 사용하는 웹 페이지는 고려 대상이 아니다. 따라서 가장 높은 보안 단계인 Strict 정책을 적용하였다.<li>Spring boot에서 Cookie에 httpOnly 옵션 등 기타 설정 방법은 하단 출처를 참고하였다.</ul><p>출처: <a href="https://dncjf64.tistory.com/292">https://dncjf64.tistory.com/292</a><br /> <a href="https://seob.dev/posts/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%BF%A0%ED%82%A4%EC%99%80-SameSite-%EC%86%8D%EC%84%B1/">https://seob.dev/posts/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%BF%A0%ED%82%A4%EC%99%80-SameSite-%EC%86%8D%EC%84%B1/</a><br /> <a href="https://www.hahwul.com/2020/01/18/samesite-lax/">https://www.hahwul.com/2020/01/18/samesite-lax/</a></p><div class="language-java highlighter-rouge"><div class="code-header"> <span text-data=" Java "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">api</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">main</span><span class="err">\</span><span class="n">java</span><span class="err">\</span><span class="n">com</span><span class="err">\</span><span class="n">suresoft</span><span class="err">\</span><span class="n">sw_test_forum</span><span class="err">\</span><span class="n">controller</span><span class="err">\</span><span class="n">common</span><span class="err">\</span><span class="nc">AuthorityController</span><span class="o">.</span><span class="na">java</span><span class="o">&gt;</span>

    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/authenticate"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">authenticate</span><span class="o">(</span><span class="nd">@Valid</span> <span class="nd">@RequestBody</span> <span class="nc">LoginDto</span> <span class="n">loginDto</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// authenticationToken 생성, username + moduleName</span>
        <span class="c1">//...</span>

        <span class="c1">// authenticate 메소드가 실행될 때 loadUserByUsername 메소드 호출</span>
        <span class="c1">// ...</span>

        <span class="c1">// JWT token 생성, token subject는 userIdx와 username으로 구성</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">findUserIdxByUsername</span><span class="o">(</span><span class="n">loginDto</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
        <span class="nc">String</span> <span class="n">jwt</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">createToken</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getIdx</span><span class="o">(),</span> <span class="n">authentication</span><span class="o">);</span>

        <span class="nc">ResponseCookie</span> <span class="n">resCookie</span> <span class="o">=</span> <span class="nc">ResponseCookie</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="s">"accessToken"</span><span class="o">,</span> <span class="n">jwt</span><span class="o">)</span>
                <span class="o">.</span><span class="na">httpOnly</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
<span class="c1">//                .domain("") //  해당 도메인에서만 유효한 쿠키</span>
                <span class="o">.</span><span class="na">sameSite</span><span class="o">(</span><span class="s">"Strict"</span><span class="o">)</span> <span class="c1">// None, Strict, Lax</span>
<span class="c1">//                .secure(true) // HTTPS가 적용된 요청에만 전송되는 쿠키</span>
                <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">maxAge</span><span class="o">(</span><span class="nc">Math</span><span class="o">.</span><span class="na">toIntExact</span><span class="o">(</span><span class="mi">1</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="o">))</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="n">response</span><span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">"Set-Cookie"</span><span class="o">,</span> <span class="n">resCookie</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nf">ResponseEntity</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><ul><li>인증된 JWT는 쿠키에 저장되어 클라이언트에 전송된다. 이후 클라이언트에서는 서버로 JWT를 전달해야 하는데, axios에서는 하단 설정을 추가하면 JWT를 쿠키에 저장하여 전송 한다. 서버는 클라이언트 쿠키에 저장된 JWT를 사용하여 인증을 수행한다.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="nx">module</span><span class="o">-</span><span class="nx">app</span><span class="o">-</span><span class="nx">web</span><span class="err">\</span><span class="nx">front</span><span class="err">\</span><span class="nx">src</span><span class="err">\</span><span class="nx">main</span><span class="p">.</span><span class="nx">js</span><span class="o">&gt;</span>

<span class="c1">// axios 설정</span>
<span class="c1">// ...</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// 다른 origin에 JWT를 전달하기 위한 설정</span>
</pre></table></code></div></div><p>출처: <a href="https://dncjf64.tistory.com/292">https://dncjf64.tistory.com/292</a><br /> <a href="https://cherish-it.tistory.com/11">https://cherish-it.tistory.com/11</a></p><h3 id="csrfcross-site-request-forgery">CSRF(Cross Site Request Forgery)</h3><ul><li>웹 사이트의 취약점을 이용하여 이용자가 의도하지 하지 않은 요청을 통한 공격이다.</ul><p>CSRF 시나리오 출처: <a href="https://codevang.tistory.com/282">https://codevang.tistory.com/282</a> <br /></p><ul><li>가장 간단한 해결책으로는 CSRF 토큰을 헤더 정보에 포함하여 서버에 요청하는 것이다.<li>클라이언트에서 axios를 사용하는 경우 CSRF 토큰을 전송 설정은 기본 값으로 되어 있다.</ul><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="nx">module</span><span class="o">-</span><span class="nx">app</span><span class="o">-</span><span class="nx">web</span><span class="err">\</span><span class="nx">front</span><span class="err">\</span><span class="nx">src</span><span class="err">\</span><span class="nx">main</span><span class="p">.</span><span class="nx">js</span><span class="o">&gt;</span>

<span class="c1">// axios 설정</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">xsrfCookieName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">XSRF-TOKEN</span><span class="dl">'</span> <span class="c1">// csrf 기본 설정을 명시적으로 선언</span>
<span class="nx">axios</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">xsrfHeaderName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">X-XSRF-TOKEN</span><span class="dl">'</span> <span class="c1">// csrf 기본 설정을 명시적으로 선언</span>
</pre></table></code></div></div><p>출처: <a href="https://zetawiki.com/wiki/Vue.js_%2B_axios_%2B_django_CSRF_%ED%86%A0%ED%81%B0_%EC%84%A4%EC%A0%95_%EB%A7%9E%EC%B6%94%EA%B8%B0">https://zetawiki.com/wiki/Vue.js_%2B_axios_%2B_django_CSRF_%ED%86%A0%ED%81%B0_%EC%84%A4%EC%A0%95_%EB%A7%9E%EC%B6%94%EA%B8%B0</a> <br /></p><ul><li>서버에서는 클라이언트에서 송신한 CSRF Token이 유효한지 검사해야 한다.<li>Spring boot에서 CSRF 설정을 방법은 하단 출처를 참고하였다.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span text-data=" Java "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">api</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">main</span><span class="err">\</span><span class="n">java</span><span class="err">\</span><span class="n">com</span><span class="err">\</span><span class="n">suresoft</span><span class="err">\</span><span class="n">sw_test_forum</span><span class="err">\</span><span class="n">config</span><span class="err">\</span><span class="nc">SecurityConfig</span><span class="o">.</span><span class="na">java</span><span class="o">&gt;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebSecurity</span>
<span class="nd">@EnableGlobalMethodSecurity</span><span class="o">(</span><span class="n">prePostEnabled</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="kd">extends</span> <span class="nc">WebSecurityConfigurerAdapter</span> <span class="o">{</span>

    <span class="c1">// ...</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">http</span>
                <span class="c1">// csrf 설정</span>
                <span class="o">.</span><span class="na">csrf</span><span class="o">()</span>
                <span class="o">.</span><span class="na">csrfTokenRepository</span><span class="o">(</span><span class="nc">CookieCsrfTokenRepository</span><span class="o">.</span><span class="na">withHttpOnlyFalse</span><span class="o">())</span>
                <span class="o">.</span><span class="na">ignoringAntMatchers</span><span class="o">(</span><span class="s">"/api/auths/authenticate"</span><span class="o">)</span>
        <span class="c1">// ...</span>
</pre></table></code></div></div><p>출처: <a href="https://cheese10yun.github.io/spring-csrf/">https://cheese10yun.github.io/spring-csrf/</a></p><h3 id="cors-preflight-요청은-권한-확인-제외">CORS preflight 요청은 권한 확인 제외</h3><ul><li>클라이언트(요청하는 쪽)이 서버(요청 받는 쪽)과 본격적인 통신을 수행하기 전에 OPTIONS 메소드로 preflight를 전송한다. 실제 요청과 응답을 주고 받기 전 클라이언트에 CORS 권한이 있는지 ‘사전검사’를 한 후에 클라이언트에서 실제 요청을 보낸다.<li>하지만 preflight를 보내는 경우에도 JWT가 있는지 검사하여 에러가 발생한다. 따라서 preflight(request method가 OPTIONS)를 전송할 때를 JWT 유효성 검사에서 제외하였다.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span text-data=" Java "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">api</span><span class="err">\</span><span class="n">java</span><span class="err">\</span><span class="n">com</span><span class="err">\</span><span class="n">suresoft</span><span class="err">\</span><span class="n">sw_test_forum</span><span class="err">\</span><span class="n">jwt</span><span class="err">\</span><span class="nc">JwtFilter</span><span class="o">.</span><span class="na">java</span><span class="o">&gt;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doFilter</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">servletRequest</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">servletResponse</span><span class="o">,</span> <span class="nc">FilterChain</span> <span class="n">filterChain</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">ServletException</span> <span class="o">{</span>
        <span class="nc">HttpServletRequest</span> <span class="n">httpServletRequest</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpServletRequest</span><span class="o">)</span> <span class="n">servletRequest</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">requestURI</span> <span class="o">=</span> <span class="n">httpServletRequest</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
        <span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">=</span> <span class="nc">WebUtils</span><span class="o">.</span><span class="na">getCookie</span><span class="o">(</span><span class="n">httpServletRequest</span><span class="o">,</span> <span class="s">"accessToken"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">jwt</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(!</span><span class="nc">EmptyUtil</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">(</span><span class="n">cookie</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">jwt</span> <span class="o">=</span> <span class="n">cookie</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"jwt: "</span> <span class="o">+</span> <span class="n">jwt</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"requestURI: "</span> <span class="o">+</span> <span class="n">requestURI</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">hasText</span><span class="o">(</span><span class="n">jwt</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">validateToken</span><span class="o">(</span><span class="n">jwt</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">Authentication</span> <span class="n">authentication</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">getAuthentication</span><span class="o">(</span><span class="n">jwt</span><span class="o">);</span>
            <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">authentication</span><span class="o">);</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Security Context에 '{}' 인증 정보를 저장했습니다, uri: {}"</span><span class="o">,</span> <span class="n">authentication</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">requestURI</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="s">"OPTIONS"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">httpServletRequest</span><span class="o">.</span><span class="na">getMethod</span><span class="o">()))</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"preflight: OPTIONS 요청"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="s">"/api/auths/authenticate"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">requestURI</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"/api/auths/authenticate 요청"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"유효한 JWT 토큰이 없습니다, uri: {}"</span><span class="o">,</span> <span class="n">requestURI</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">filterChain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">servletRequest</span><span class="o">,</span> <span class="n">servletResponse</span><span class="o">);</span>
    <span class="o">}</span>
</pre></table></code></div></div><p>출처: <a href="https://velog.io/@ojwman/spring-boot-cors-header-preflight">https://velog.io/@ojwman/spring-boot-cors-header-preflight</a></p><h2 id="spring-boot에서-xsscross-site-scripting-취약점-방어">Spring boot에서 XSS(Cross-site Scripting) 취약점 방어</h2><ul><li>Spring boot에서 XSS 취약점을 방어 수단으로 lucy-xss-servlet-filter를 사용할 수 있다. 그러나 Form Data에 대해서 적용되기에, 프론트엔드 서버와 백엔드 서버 간의 통신에서 사용하는 Request Payload에 대해서는 적용되지 않는다.<li>따라서 MessageConverter를 사용하여 JSON 문자열을 생성할 때 XSS 취약점을 방어하도록 처리하였다.</ul><p>출처: <a href="https://exhibitlove.tistory.com/3">https://exhibitlove.tistory.com/3</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/web/'>Web</a>, <a href='/categories/project-sw-test-forum/'>Project SW Test Forum</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1 - 끄적이판&url=https://scribnote5.github.io/posts/Project-SW-Test-Forum4/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1 - 끄적이판&u=https://scribnote5.github.io/posts/Project-SW-Test-Forum4/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Project SW Test Forum 4. Vue.js와 Spring boot에서 JWT 기반 로그인 구현 - 1 - 끄적이판&url=https://scribnote5.github.io/posts/Project-SW-Test-Forum4/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/MISRA-C3/">함수 호출 인자 및 함수 매개변수의 한정자 관계</a><li><a href="/posts/Project-SW-Test-Forum17/">Project SW Test Forum 17. 유지보수 - 5</a><li><a href="/posts/Project-SW-Test-Forum16/">Project SW Test Forum 16. 유지보수 - 4</a><li><a href="/posts/MISRA-C-02-03/">MISRA C 2012_02_03 - 사용하지 않는 자료형 선언 제거</a><li><a href="/posts/MISRA-C-02-04/">MISRA C 2012_02_04 - 사용하지 않는 태그(struct, union, enum) 선언 제거</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Project-SW-Test-Forum0/"><div class="card-body"> <span class="timeago small" >Jun 21, 2021<i class="unloaded">2021-06-21T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project SW Test Forum 0. 소프트웨어 테스트 포럼 소개</h3><div class="text-muted small"><p> 소프트웨어 테스트 포럼 페이지 개발 프로젝트를 소개한다. github: https://github.com/scribnote5/sw_test_forum 계기 회사 업무 중 업무관리 시스템의 부재로 정리 및 공유의 불편함을 느꼈다. 현재 회사에서의 주요 업무는 신뢰성 시험이며, 이중 정적 시험(코드 규칙) 가이드 라인은 쌓여 있는 데...</p></div></div></a></div><div class="card"> <a href="/posts/Project-SW-Test-Forum1/"><div class="card-body"> <span class="timeago small" >Jul 10, 2021<i class="unloaded">2021-07-10T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project SW Test Forum 1. Spring Boot 환경 구축 및 프로젝트 구성 - 1</h3><div class="text-muted small"><p> Spring Boot 환경 구축 및 프로젝트 구성 과정을 소개한다. github: https://github.com/scribnote5/sw_test_forum Spring Boot 환경 구축 Spring Boot 환경 구축 방법은 과거 작성하였던 ‘Project Lab 1-1. 개발 환경 구축(IntelliJ) ‘ github pa...</p></div></div></a></div><div class="card"> <a href="/posts/Project-SW-Test-Forum2/"><div class="card-body"> <span class="timeago small" >Jul 10, 2021<i class="unloaded">2021-07-10T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project SW Test Forum 2. Vue.js 환경 구축 및 프로젝트 구성 - 1</h3><div class="text-muted small"><p> Vue.js 환경 구축 및 프로젝트 구성 과정을 소개한다. github: https://github.com/scribnote5/sw_test_forum Vue.js란? Vue.js는 프론트엔드 프레임워크로서, 컴포넌트(Component) 기반의 SPA(Single Page Application)를 구축할 수 있게 하는 프레임워크다. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Project-SW-Test-Forum3/" class="btn btn-outline-primary" prompt="Older"><p>Project SW Test Forum 3. Vue.js CKEditor 5 - 1</p></a> <a href="/posts/Project-Lab27/" class="btn btn-outline-primary" prompt="Newer"><p>Project Lab 27. 추가 개발 및 유지보수 - 1</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://scribnote5.github.io/posts/Project-SW-Test-Forum4/'; this.page.identifier = '/posts/Project-SW-Test-Forum4/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://scribnote5-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (modeToggle !== null) { modeToggle.addEventListener('click', reloadDisqus); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/scribnote5">scribnote5</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
