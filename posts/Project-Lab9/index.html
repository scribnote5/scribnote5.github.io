<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Project Lab 9. 게시판 개발(검색) - 6" /><meta property="og:locale" content="en" /><meta name="description" content="게시글 검색 기능 개발 과정을 소개한다." /><meta property="og:description" content="게시글 검색 기능 개발 과정을 소개한다." /><link rel="canonical" href="https://scribnote5.github.io/posts/Project-Lab9/" /><meta property="og:url" content="https://scribnote5.github.io/posts/Project-Lab9/" /><meta property="og:site_name" content="끄적이판" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-13T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Project Lab 9. 게시판 개발(검색) - 6" /><meta name="twitter:site" content="@" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"게시글 검색 기능 개발 과정을 소개한다.","url":"https://scribnote5.github.io/posts/Project-Lab9/","headline":"Project Lab 9. 게시판 개발(검색) - 6","@type":"BlogPosting","dateModified":"2020-08-13T00:00:00+09:00","datePublished":"2020-08-13T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://scribnote5.github.io/posts/Project-Lab9/"},"@context":"https://schema.org"}</script><title>Project Lab 9. 게시판 개발(검색) - 6 | 끄적이판</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="끄적이판"><meta name="application-name" content="끄적이판"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/banners/home.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">끄적이판</a></div><div class="site-subtitle font-italic">지금까지 공부한 것을 끄적이는 블로그</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/scribnote5" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['scribnote5','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/daeyoung-song-175486167" aria-label="linkedin" class="order-6" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Project Lab 9. 게시판 개발(검색) - 6</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Project Lab 9. 게시판 개발(검색) - 6</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> scribnote5 </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Aug 13, 2020, 12:00 AM +0900" >Aug 13, 2020<i class="unloaded">2020-08-13T00:00:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Aug 13, 2020, 12:00 AM +0000" >Aug 13, 2020<i class="unloaded">2020-08-13T00:00:00+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1343 words">7 min read</span></div></div><div class="post-content"><ul><li><p>게시글 검색 기능 개발 과정을 소개한다.</p><li>github: <a href="https://github.com/scribnote5/lab">https://github.com/scribnote5/lab</a><li><p>github commit: <a href="https://github.com/scribnote5/lab/commit/b806ca1160cca021c5e1abdc2ad012686965dee8">https://github.com/scribnote5/lab/commit/b806ca1160cca021c5e1abdc2ad012686965dee8</a></p><li>최신 프로젝트 코드와 형상이 다를 수 있습니다. 게시글 코드는 참고만 하시되, 최신 코드는 github에서 확인 부탁드립니다.</ul><h2 id="페이징-처리-방법-jpa-vs-datatables">페이징 처리 방법: JPA vs DataTables?</h2><ul><li>게시판의 페이징 처리 방법으로 Spring JPA 또는 Javascript DataTables 라이브러리를 사용할 수 있다.<li>Spring JPA는 페이징 처리 기능을 제공한다. 반면 Javascript DataTables 라이브러리는 페이징 처리 뿐만 아니라 다양한 기능(복잡한 검색 기능, ajax를 사용한 페이징 처리, 모바일 지원 등)들을 간단한 설정과 최소한의 소스 코드 추가를 통하여 사용할 수 있다.<li>게시판의 다양한 기능들을 직접 구현하지 않고 빠르게 사용하기를 원한다면, Javascript DataTables 라이브러리를 사용하는 것을 적극 추천한다. 본 프로젝트에서는Spring JPA로 페이징 처리를 구현하였다.(DataTables 라이브러리를 너무 늦게 알게됨)</ul><p>출처: <a href="https://datatables.net/">https://datatables.net/</a><br /> <a href="https://medium.com/@gustavo.ponce.ch/spring-boot-jquery-datatables-a2e816e2b5e9">https://medium.com/@gustavo.ponce.ch/spring-boot-jquery-datatables-a2e816e2b5e9</a></p><h2 id="검색-기능-설계">검색 기능 설계</h2><ul><li>본 프로젝트에서는 Spring JPA의 메소드 이름으로 쿼리 작성하는 방법으로 기본적인 검색 기능을 구현하였다.<li>검색 기능은 검색 유형(searchType)과 검색어(keyword)로 구성되며, 검색 조건이 여러 개인 복잡한 검색 기능은 다루지 않는다. 복잡한 검색 기능은 추후 기회가 되면 개발할 예정이다.</ul><h2 id="dto-설계">DTO 설계</h2><ul><li>검색 유형과 검색어를 저장하는 공통 DTO다.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span text-data=" Java "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">domain</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">kr</span><span class="o">/</span><span class="n">ac</span><span class="o">/</span><span class="n">univ</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">dto</span><span class="o">/</span><span class="nc">SearchDto</span><span class="o">.</span><span class="na">java</span><span class="o">&gt;</span>

<span class="kn">package</span> <span class="nn">kr.ac.univ.common.dto</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.Getter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.NoArgsConstructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Setter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.ToString</span><span class="o">;</span>

<span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@ToString</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SearchDto</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="nc">String</span> <span class="n">searchType</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
   <span class="kd">private</span> <span class="nc">String</span> <span class="n">keyword</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="비즈니스-로직">비즈니스 로직</h2><ul><li>DB에 접근하여 데이터를 조회하는 메소드다.<li>findAllByTitleContaining: 제목에 키워드가 포함된 게시글을 모두 검색한다.<li>findAllByContentContaining: 내용에 키워드가 포함된 게시글을 모두 검색한다.<li>findAllByCreatedByContaining: 작성자에 키워드가 포함된 게시글을 모두 검색한다.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span text-data=" Java "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">domain</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">kr</span><span class="o">/</span><span class="n">ac</span><span class="o">/</span><span class="n">univ</span><span class="o">/</span><span class="n">noticeBoard</span><span class="o">/</span><span class="n">repository</span><span class="o">/</span><span class="nc">NoticeBoardRepository</span><span class="o">.</span><span class="na">java</span><span class="o">&gt;&gt;</span>

<span class="kn">package</span> <span class="nn">kr.ac.univ.noticeBoard.repository</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">kr.ac.univ.noticeBoard.domain.NoticeBoard</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">NoticeBoardRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">NoticeBoard</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
   <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">NoticeBoard</span><span class="o">&gt;</span> <span class="nf">findAllByTitleContaining</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="nc">String</span> <span class="n">title</span><span class="o">);</span>

   <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">NoticeBoard</span><span class="o">&gt;</span> <span class="nf">findAllByContentContaining</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="nc">String</span> <span class="n">content</span><span class="o">);</span>

   <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">NoticeBoard</span><span class="o">&gt;</span> <span class="nf">findAllByCreatedByContaining</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="nc">String</span> <span class="n">memberId</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p><br /></p><ul><li>게시글의 리스트를 조회하는 findNoticeBoardList 메소드에 검색 기능을 추가하였다.<li>searchDto의 searchType에 따라서 수행되는 메소드가 변경된다.<li>searchType이 “TITLE”(제목)이면 제목에 키워드가 포함된 게시글을 모두 검색한다.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span text-data=" Java "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">domain</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">kr</span><span class="o">/</span><span class="n">ac</span><span class="o">/</span><span class="n">univ</span><span class="o">/</span><span class="n">noticeBoard</span><span class="o">/</span><span class="n">service</span><span class="o">/</span><span class="nc">NoticeBoardService</span><span class="o">.</span><span class="na">java</span><span class="o">&gt;</span>

<span class="o">...</span>
<span class="kd">public</span> <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">NoticeBoardDto</span><span class="o">&gt;</span> <span class="nf">findNoticeBoardList</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="nc">SearchDto</span> <span class="n">searchDto</span><span class="o">)</span> <span class="o">{</span>
   <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">NoticeBoard</span><span class="o">&gt;</span> <span class="n">noticeBoardList</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
   <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">NoticeBoardDto</span><span class="o">&gt;</span> <span class="n">noticeBoardDtoList</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

   <span class="n">pageable</span> <span class="o">=</span> <span class="nc">PageRequest</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">pageable</span><span class="o">.</span><span class="na">getPageNumber</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">pageable</span><span class="o">.</span><span class="na">getPageNumber</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">pageable</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">(),</span> <span class="nc">Sort</span><span class="o">.</span><span class="na">Direction</span><span class="o">.</span><span class="na">DESC</span><span class="o">,</span> <span class="s">"idx"</span><span class="o">);</span>

   <span class="k">switch</span> <span class="o">(</span><span class="n">searchDto</span><span class="o">.</span><span class="na">getSearchType</span><span class="o">())</span> <span class="o">{</span>
       <span class="k">case</span> <span class="s">"TITLE"</span><span class="o">:</span>
           <span class="n">noticeBoardList</span> <span class="o">=</span> <span class="n">noticeBoardRepository</span><span class="o">.</span><span class="na">findAllByTitleContaining</span><span class="o">(</span><span class="n">pageable</span><span class="o">,</span> <span class="n">searchDto</span><span class="o">.</span><span class="na">getKeyword</span><span class="o">());</span>
           <span class="k">break</span><span class="o">;</span>
       <span class="k">case</span> <span class="s">"CONTENT"</span><span class="o">:</span>
           <span class="n">noticeBoardList</span> <span class="o">=</span> <span class="n">noticeBoardRepository</span><span class="o">.</span><span class="na">findAllByContentContaining</span><span class="o">(</span><span class="n">pageable</span><span class="o">,</span> <span class="n">searchDto</span><span class="o">.</span><span class="na">getKeyword</span><span class="o">());</span>
           <span class="k">break</span><span class="o">;</span>
       <span class="k">case</span> <span class="s">"ID"</span><span class="o">:</span>
           <span class="n">noticeBoardList</span> <span class="o">=</span> <span class="n">noticeBoardRepository</span><span class="o">.</span><span class="na">findAllByCreatedByContaining</span><span class="o">(</span><span class="n">pageable</span><span class="o">,</span> <span class="n">searchDto</span><span class="o">.</span><span class="na">getKeyword</span><span class="o">());</span>
           <span class="k">break</span><span class="o">;</span>
       <span class="k">default</span><span class="o">:</span>
           <span class="n">noticeBoardList</span> <span class="o">=</span> <span class="n">noticeBoardRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">pageable</span><span class="o">);</span>
           <span class="k">break</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="n">noticeBoardDtoList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PageImpl</span><span class="o">&lt;</span><span class="nc">NoticeBoardDto</span><span class="o">&gt;(</span><span class="nc">NoticeBoardMapper</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">toDto</span><span class="o">(</span><span class="n">noticeBoardList</span><span class="o">.</span><span class="na">getContent</span><span class="o">()),</span> <span class="n">pageable</span><span class="o">,</span> <span class="n">noticeBoardList</span><span class="o">.</span><span class="na">getTotalElements</span><span class="o">());</span>

   <span class="c1">// NewIcon 판별</span>
   <span class="k">for</span> <span class="o">(</span><span class="nc">NoticeBoardDto</span> <span class="n">noticeBoardDto</span> <span class="o">:</span> <span class="n">noticeBoardDtoList</span><span class="o">)</span> <span class="o">{</span>
       <span class="c1">// 추후 변경</span>
       <span class="n">noticeBoardDto</span><span class="o">.</span><span class="na">setNewIcon</span><span class="o">(</span><span class="nc">NewIconCheck</span><span class="o">.</span><span class="na">isNew</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">()));</span>
   <span class="o">}</span>

   <span class="k">return</span> <span class="n">noticeBoardDtoList</span><span class="o">;</span>
<span class="o">}</span>
<span class="o">...</span>
</pre></table></code></div></div><p><br /></p><ul><li>View에서 전달한 SearchDto(검색 관련 데이터)를 Service 계층으로 전달한다.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span text-data=" Java "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">module</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">web</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">kr</span><span class="o">/</span><span class="n">ac</span><span class="o">/</span><span class="n">univ</span><span class="o">/</span><span class="n">controller</span><span class="o">/</span><span class="nc">NoticeBoardController</span><span class="o">.</span><span class="na">java</span><span class="o">&gt;</span>

<span class="o">...</span>

<span class="c1">// List</span>
<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/list"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">noticeBoardList</span><span class="o">(</span><span class="nd">@PageableDefault</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">,</span> <span class="nc">SearchDto</span> <span class="n">searchDto</span><span class="o">,</span> <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"noticeBoardDtoList"</span><span class="o">,</span> <span class="n">noticeBoardService</span><span class="o">.</span><span class="na">findNoticeBoardList</span><span class="o">(</span><span class="n">pageable</span><span class="o">,</span> <span class="n">searchDto</span><span class="o">));</span>

   <span class="k">return</span> <span class="s">"/noticeBoard/list"</span><span class="o">;</span>
<span class="o">}</span>

<span class="o">...</span>
</pre></table></code></div></div><h2 id="view">View</h2><ul><li>게시글 리스트 상단에 검색 UI를 추가하였다.<li>페이징 번호를 클릭할 때 URI 뒤에 검색 데이터를 함께 제공하여(쿼리 스트링), Controller에서 get 방식으로 검색 데이터를 받을 수 있도록 하였다.<li>기존 페이징 처리 소스 코드에서 문제점이 발견되었는데, 하단 이미지처럼 검색 결과가 하나도 없는 경우 페이징 번호가 ‘1’만 출력되어야 하지만 페이징 번호가 ‘1’ ‘0’ 두 개가 출력된다.<li>해당 오류를 수정하기 위해서 마지막 페이징 번호인 endNumber를 정하는 로직에, ${noticeBoardDtoList.totalPages} == 0 ? 1 : ${noticeBoardDtoList.totalPages} 소스 코드를 추가하였다. 검색 결과가 하나도 없는 경우, 즉 totalPages가 0인 경우 endNumber에 1을 대입하여 해결하였다.</ul><p><img data-proofer-ignore data-src="/assets/img/2020-08-13-Project Lab9/image1.png" alt="image" /></p><div class="language-html highlighter-rouge"><div class="code-header"> <span text-data=" HTML "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="nt">&lt;module-app-web</span><span class="err">/</span><span class="na">src</span><span class="err">/</span><span class="na">main</span><span class="err">/</span><span class="na">resources</span><span class="err">/</span><span class="na">templates</span><span class="err">/</span><span class="na">noticeBoard</span><span class="err">/</span><span class="na">list.html</span><span class="nt">&gt;</span>

...
   <span class="nt">&lt;form</span> <span class="na">name=</span><span class="s">"form"</span> <span class="na">id=</span><span class="s">"form"</span> <span class="na">th:object=</span><span class="s">"${searchDto}"</span> <span class="na">action=</span><span class="s">"#"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"pull-right"</span><span class="nt">&gt;</span>
           <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"pull-left"</span> <span class="na">style=</span><span class="s">"width: 100px; margin: 10px 10px;"</span><span class="nt">&gt;</span>
               <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"searchType"</span> <span class="na">th:field=</span><span class="s">"*{searchType}"</span> <span class="na">class=</span><span class="s">"form-control input-sm"</span><span class="nt">&gt;</span>
                   <span class="nt">&lt;option</span> <span class="na">th:value=</span><span class="s">"TITLE"</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/option&gt;</span>
                   <span class="nt">&lt;option</span> <span class="na">th:value=</span><span class="s">"CONTENT"</span><span class="nt">&gt;</span>Content<span class="nt">&lt;/option&gt;</span>
                   <span class="nt">&lt;option</span> <span class="na">th:value=</span><span class="s">"ID"</span><span class="nt">&gt;</span>ID<span class="nt">&lt;/option&gt;</span>
               <span class="nt">&lt;/select&gt;</span>
           <span class="nt">&lt;/div&gt;</span>

           <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"pull-left"</span> <span class="na">style=</span><span class="s">"width: 200px; margin: 10px 10px; float: left;"</span><span class="nt">&gt;</span>
               <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"keyword"</span> <span class="na">class=</span><span class="s">"col-md-1 form-control input-sm"</span>
                      <span class="na">th:value=</span><span class="s">"${searchDto?.keyword}"</span><span class="nt">/&gt;</span>
           <span class="nt">&lt;/div&gt;</span>

           <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"pull-left"</span> <span class="na">style=</span><span class="s">"width: 100px; margin: 10px 0; float:left;"</span><span class="nt">&gt;</span>
               <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"search"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-primary btn-block"</span><span class="nt">&gt;</span>Search<span class="nt">&lt;/button&gt;</span>
           <span class="nt">&lt;/div&gt;</span>
       <span class="nt">&lt;/div&gt;</span>
...
   <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span>

...

<span class="nt">&lt;script&gt;</span>
   <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#search</span><span class="dl">'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
       <span class="nb">document</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">action</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">/notice-board/list</span><span class="dl">'</span><span class="p">;</span>
       <span class="nb">document</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">get</span><span class="dl">'</span><span class="p">;</span>
       <span class="nb">document</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
   <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre></table></code></div></div><h2 id="프로젝트-실행-결과">프로젝트 실행 결과</h2><ul><li>검색 유형에 “TITLE” 검색어에 “12”를 입력하고 페이징 번호를 클릭한 경우 다음 이미지와 같이 페이징 번호, searchType 그리고 keyword가 포함된 쿼리 스트링을 확인할 수 있다.</ul><p><img data-proofer-ignore data-src="/assets/img/2020-08-13-Project Lab9/image2.png" alt="image" /></p><p><br /></p><ul><li>검색 결과, 제목에 “12”가 포함된 게시글 리스트가 출력된다.</ul><p><img data-proofer-ignore data-src="/assets/img/2020-08-13-Project Lab9/image3.png" alt="image" /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/web/'>Web</a>, <a href='/categories/project-lab/'>Project Lab</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Project Lab 9. 게시판 개발(검색) - 6 - 끄적이판&url=https://scribnote5.github.io/posts/Project-Lab9/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Project Lab 9. 게시판 개발(검색) - 6 - 끄적이판&u=https://scribnote5.github.io/posts/Project-Lab9/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Project Lab 9. 게시판 개발(검색) - 6 - 끄적이판&url=https://scribnote5.github.io/posts/Project-Lab9/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/MISRA-C3/">함수 호출 인자 및 함수 매개변수의 한정자 관계</a><li><a href="/posts/Project-SW-Test-Forum17/">Project SW Test Forum 17. 유지보수 - 5</a><li><a href="/posts/Project-SW-Test-Forum16/">Project SW Test Forum 16. 유지보수 - 4</a><li><a href="/posts/MISRA-C-02-03/">MISRA C 2012_02_03 - 사용하지 않는 자료형 선언 제거</a><li><a href="/posts/MISRA-C-02-04/">MISRA C 2012_02_04 - 사용하지 않는 태그(struct, union, enum) 선언 제거</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Project-Lab0/"><div class="card-body"> <span class="timeago small" >Apr 14, 2020<i class="unloaded">2020-04-14T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project Lab 0. 연구실 홈페이지 개발 프로젝트 소개</h3><div class="text-muted small"><p> 연구실 홈페이지 개발 프로젝트를 소개한다. 계기 대학원 재학 중일 때 노후화된 연구실 홈페이지 유지보수를 담당하였다. 연구실 홈페이지는 난잡하게 개발되어 있었고 관련 문서가 하나도 없었기에 유지보수에 큰 어려움을 겪었다. 과거 회사 재직 중일 때 Spring을 사용하여 업무 시스템을 개발한 경험이 있다. 당시 초급 개발자로서 요구사항...</p></div></div></a></div><div class="card"> <a href="/posts/Project-Lab1-1/"><div class="card-body"> <span class="timeago small" >Jul 15, 2020<i class="unloaded">2020-07-15T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project Lab 1-1. 개발 환경 구축(IntelliJ)</h3><div class="text-muted small"><p> 연구실 홈페이지 개발 프로젝트의 인텔리제이 개발 환경 구축 과정을 소개한다. 이클립스를 사용하여 개발 환경을 구축 한다면 ‘Project Lab 1-1. 개발 환경 구축(IntelliJ)’ 게시글을 참고하면 된다. 개발 환경 Windows 10 64bit jdk11.0.7 IntelliJ Ultimate 2021.1 프로젝...</p></div></div></a></div><div class="card"> <a href="/posts/Project-Lab1-2/"><div class="card-body"> <span class="timeago small" >Jul 15, 2020<i class="unloaded">2020-07-15T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project Lab 1-2. 개발 환경 구축(Eclipse)</h3><div class="text-muted small"><p> 연구실 홈페이지 개발 프로젝트의 이클립스 개발 환경 구축 과정을 소개한다. 인텔리제이 사용하여 개발 환경을 구축 한다면 ‘Project Lab 1-1. 개발 환경 구축(IntelliJ)’’ 게시글을 참고하면 된다. 개발 환경 Windows 10 64bit jdk11.0.7 Spring Tools 4 for Eclipse(sts...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/MISRA-CPP2/" class="btn btn-outline-primary" prompt="Older"><p>MISRA C++ 2008 가이드라인 표기 방식</p></a> <a href="/posts/Project-Lab10/" class="btn btn-outline-primary" prompt="Newer"><p>Project Lab 10. 로그인 구현(Spring Security) - 1</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://scribnote5.github.io/posts/Project-Lab9/'; this.page.identifier = '/posts/Project-Lab9/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://scribnote5-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (modeToggle !== null) { modeToggle.addEventListener('click', reloadDisqus); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/scribnote5">scribnote5</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
