<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1" /><meta property="og:locale" content="en" /><meta name="description" content="개발 서버 및 운영 서버에 배포하는 과정과 후기를 소개한다." /><meta property="og:description" content="개발 서버 및 운영 서버에 배포하는 과정과 후기를 소개한다." /><link rel="canonical" href="https://scribnote5.github.io/posts/Project-Lab23,-26/" /><meta property="og:url" content="https://scribnote5.github.io/posts/Project-Lab23,-26/" /><meta property="og:site_name" content="끄적이판" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-16T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1" /><meta name="twitter:site" content="@" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"개발 서버 및 운영 서버에 배포하는 과정과 후기를 소개한다.","url":"https://scribnote5.github.io/posts/Project-Lab23,-26/","headline":"Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1","@type":"BlogPosting","dateModified":"2021-06-16T00:00:00+09:00","datePublished":"2021-06-16T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://scribnote5.github.io/posts/Project-Lab23,-26/"},"@context":"https://schema.org"}</script><title>Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1 | 끄적이판</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="끄적이판"><meta name="application-name" content="끄적이판"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/banners/home.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">끄적이판</a></div><div class="site-subtitle font-italic">지금까지 공부한 것을 끄적이는 블로그</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/scribnote5" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['scribnote5','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-5" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/daeyoung-song-175486167" aria-label="linkedin" class="order-6" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> scribnote5 </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Jun 16, 2021, 12:00 AM +0900" >Jun 16, 2021<i class="unloaded">2021-06-16T00:00:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Jun 16, 2021, 12:00 AM +0000" >Jun 16, 2021<i class="unloaded">2021-06-16T00:00:00+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3127 words">17 min read</span></div></div><div class="post-content"><ul><li>개발 서버 및 운영 서버에 배포하는 과정과 후기를 소개한다.</ul><h2 id="spring-boot-gradle-jar-파일-생성">Spring Boot Gradle jar 파일 생성</h2><ul><li>운영체 제에서 실행가능한 Spring Boot 애플리케이션(실행 가능한 자바 파일)을 빌드하려면 console에서 다음 명령어를 입력하면 된다. 빌드된 파일을 실행하면 웹 애플리케이션이 수행된다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>./gradlew bootjar
</pre></table></code></div></div><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image1.png" alt="image" /></p><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image2.png" alt="image" /></p><h2 id="서버-설치-및-설정">서버 설치 및 설정</h2><ul><li>서버 운영체제는 Ubuntu 20.04 이며, 서버 구축에 필요한 패키지 설치 명령어는 다음과 같다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c"># 서버 업데이트 및 업그레이드</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt-get update <span class="nt">-y</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt-get upgrade <span class="nt">-y</span>

<span class="c"># openJDK 11 설치</span>

<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>openjdk-11-jdk <span class="nt">-y</span>

<span class="c"># mariaDB는 'Project Lab 2. Windows Subsytem for Linux(WSL)에 mariaDB 설치' 문서를 참고하여 설치하였으며, 계정 생성 후 DB를 생성함</span>

<span class="c"># 서버 jar 파일이 존재하는 경로에 업로드된 파일이 저장되는 upload 디렉터리를 생성한다.</span>
<span class="nv">$ </span><span class="nb">mkdir </span>upload
</pre></table></code></div></div><h2 id="spring-boot-jar-파일-실행-스크립트">Spring Boot jar 파일 실행 스크립트</h2><ul><li>이미 실행 중인 Spring Boot 애플리케이션을 종료하고 재시작하는 간단한 스크립트를 다음과 같이 작성하였다.</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>&lt;run_server.sh&gt;

<span class="nb">kill</span> <span class="nt">-9</span> <span class="sb">`</span>pgrep <span class="nt">-f</span> java<span class="sb">`</span>

java <span class="nt">-jar</span> module-app-admin-0.0.1-SNAPSHOT.jar <span class="nt">--spring</span>.profiles.active<span class="o">=</span>prod <span class="o">&gt;</span> module-app-admin.log &amp;
java <span class="nt">-jar</span> module-app-web-0.0.1-SNAPSHOT.jar <span class="nt">--spring</span>.profiles.active<span class="o">=</span>prod <span class="o">&gt;</span> module-app-web.log &amp;
java <span class="nt">-jar</span> module-app-api-0.0.1-SNAPSHOT.jar <span class="nt">--spring</span>.profiles.active<span class="o">=</span>prod <span class="o">&gt;</span> module-app-api.log &amp;
</pre></table></code></div></div><ul><li>각 모듈 애플리케이션은 module-~.log 파일에 저장된다.</ul><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image3.png" alt="image" /></p><h2 id="nginx-설치-및-설정">Nginx 설치 및 설정</h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre><td class="rouge-code"><pre><span class="c"># nginx 설치</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>nginx <span class="nt">-y</span>

<span class="c"># 해당 경로에는 nginx 관련 설정 파일이 존재함</span>
<span class="nv">$ </span><span class="nb">cd</span> /etc/nginx

<span class="c"># nginx 관련 메인 파일은 nginx.conf로 다음과 같이 설정함</span>
/etc/nginx/nginx.conf
user www-data<span class="p">;</span>
worker_processes auto<span class="p">;</span>
pid /run/nginx.pid<span class="p">;</span>
include /etc/nginx/modules-enabled/<span class="k">*</span>.conf<span class="p">;</span>

events <span class="o">{</span>
        worker_connections 768<span class="p">;</span>
        <span class="c"># multi_accept on;</span>
<span class="o">}</span>

http<span class="o">{</span>

<span class="c">#Flature's gzip Contents Compression Setting, 서버에서 전달하는 정적 리소스를 압축함</span>
<span class="c"># 서버에서 전달하는 정적 리소스를 압축하여 클라이언트로 전송하는 경우, 브라우저의 응답 속도를 향상 시킬 수 있다.</span>
<span class="nb">gzip </span>on<span class="p">;</span>

gzip_disable <span class="s2">"msie6"</span><span class="p">;</span>

gzip_comp_level 6<span class="p">;</span>
gzip_min_length 500<span class="p">;</span>
gzip_buffers 16 8k<span class="p">;</span>
gzip_proxied any<span class="p">;</span>

gzip_types text/plain text/css text/js text/xml text/javascript application/javascript application/x-javascript application/json application/xml application/rss+xml image/svg+xml image/png image/jpeg<span class="p">;</span>
<span class="c">#Flature's gzip Contents Compression Setting End</span>

<span class="c"># upload file size, 파일 업로드 최대 크기 설정</span>
<span class="c"># Spring Boot 애플리케이션 뿐만 아니라 nginx에서도 업로드 가능한 파일 크기를 설정해야 정상적으로 파일 업로드가 가능하다.</span>
client_max_body_size 50M<span class="p">;</span>

        server <span class="o">{</span>
                server_name eslab.cnu.ac.kr www.eslab.cnu.ac.kr<span class="p">;</span>

                location / <span class="o">{</span>
                        proxy_pass &lt;Spring Boot 애플리케이션의 주소 정보&gt;<span class="p">;</span>
                        proxy_set_header Host <span class="nv">$http_host</span><span class="p">;</span>
                        proxy_set_header X-Real-IP <span class="nv">$remote_addr</span><span class="p">;</span>
                        proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
                <span class="o">}</span>
        <span class="o">}</span>
        ...
<span class="o">}</span>


<span class="c"># nginx 재시작 명령어</span>
<span class="nv">$ </span>nginx <span class="nt">-s</span> reload
<span class="nv">$ </span>systemctl stop nginx
<span class="nv">$ </span>systemctl start nginx

<span class="c"># tail 명령어를 사용한 실시간 nginx 에러 로그 확인 방법</span>
<span class="nv">$ </span><span class="nb">tail</span> <span class="nt">-2f</span> /var/log/nginx/error.log
</pre></table></code></div></div><h2 id="ssl-적용">SSL 적용</h2><ul><li>웹 페이지의 보안을 강화시키기 위해서 https 즉 SSL을 적용해야 한다.<li><p>유료 SSL을 적용하기에는 비용이 부담되기에 무료 SSL 인증서를 제공하는 ‘Let’s Encrypt SSL’을 사용하여 인증서 발급 받았으며 자동 갱신하도록 설정하였다.</p><li>‘Let’s Encrypt SSL’을 적용하는 다양한 방법이 있으며, Certbot을 통하여 인증서를 발급 받을 수 있다. Certbot은 Let’s Encrypt 인증서를 자동으로 발급 및 갱신을 해주는 프로그램으로서, SSL 인증을 간단하게 진행할 수 있다.<li>https://certbot.eff.org/ 페이지에 접속하면 웹 서버 종류에 따라, 운영체제 종류에 따라 SSL 인증서를 발급 절차를 소개한다. 많은 블로그에서 Certbot을 사용한 무료 SSL 인증서 발급 및 자동 갱신 과정을 소개한다. 그러나 공식 홈페이지에서는 환경에 따라 설치 과정을 자세하게 설명하므로, 공식 홈페이지를 참고하는 것을 추천한다.</ul><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image4.png" alt="image" /></p><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image5.png" alt="image" /></p><ul><li>홈페이지에 명시된 절차에 따라서 다음과 같이 Certbot을 통하여 SSL 인증서를 발급 받았고, SSL 인증서가 만료된 경우 인증서를 자동으로 갱신하도록 하였다.</ul><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image6.png" alt="image" /></p><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image7.png" alt="image" /></p><ul><li>Certbot으로 SSL 인증서를 등록을 마치면, nginx.conf 파일에 다음과 같이 SSL 관련 설정이 ‘# managed by Certbot’ 주석으로 표기되어 자동으로 추가된 것을 확인 할 수 있다.</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span text-data=" Text "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
</pre><td class="rouge-code"><pre>&lt;/etc/nginx/nginx.conf&gt;

user www-data;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
        worker_connections 768;
        # multi_accept on;
}

http{

#Flature's gzip Contents Compression Setting, 서버에서 전달하는 정적 리소스를 압축함
gzip on;

gzip_disable "msie6";

gzip_comp_level 6;
gzip_min_length 500;
gzip_buffers 16 8k;
gzip_proxied any;

gzip_types text/plain text/css text/js text/xml text/javascript application/javascript application/x-javascript application/json application/xml application/rss+xml image/svg+xml image/png image/jpeg;
#Flature's gzip Contents Compression Setting End

# upload file size, 파일 업로드 최대 크기 설정
client_max_body_size 50M;

        server {
                server_name eslab.cnu.ac.kr www.eslab.cnu.ac.kr;

                location / {
                        proxy_pass &lt;Spring Boot 애플리케이션의 주소 정보&gt;;
                        proxy_set_header Host $http_host;
                        proxy_set_header X-Real-IP $remote_addr;
                        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                }

                listen [::]:443 ssl ipv6only=on; # managed by Certbot
                listen 443 ssl; # managed by Certbot
                ssl_certificate /etc/letsencrypt/live/eslab.cnu.ac.kr/fullchain.pem; # managed by Certbot
                ssl_certificate_key /etc/letsencrypt/live/eslab.cnu.ac.kr/privkey.pem; # managed by Certbot
                include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
                ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
        }

        server {
                if ($host = eslab.cnu.ac.kr) {
                        return 301 https://$host$request_uri;
                } # managed by Certbot


                listen 80 default_server;
                listen [::]:80 default_server;
                server_name eslab.cnu.ac.kr www.eslab.cnu.ac.kr;

                return 404; # managed by Certbot
        }


        server {
                server_name eslab.cnu.ac.kr www.eslab.cnu.ac.kr;

                location / {
                        #proxy_hide_header Access-Control-Allow-Origin;
                        #add_header 'Access-Control-Allow-Origin' '*';
                        #add_header 'Access-Control-Allow-Origin' * always;

                        proxy_pass &lt;Spring Boot 애플리케이션의 주소 정보&gt;;
                        proxy_set_header Host $http_host;
                        proxy_set_header X-Real-IP $remote_addr;
                        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

                listen [::]:8083 ssl ipv6only=on; # managed by Certbot
                listen 8083 ssl; # managed by Certbot
                ssl_certificate /etc/letsencrypt/live/eslab.cnu.ac.kr/fullchain.pem; # managed by Certbot
                ssl_certificate_key /etc/letsencrypt/live/eslab.cnu.ac.kr/privkey.pem; # managed by Certbot
                include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
                ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
        }
}
</pre></table></code></div></div><p>출처: <a href="https://sbgg.tistory.com/28">https://sbgg.tistory.com/28</a></p><h2 id="서버-구성도">서버 구성도</h2><h3 id="ssl-미적용">SSL 미적용</h3><ul><li>사용자 페이지 서버는 port 8080(http), api 서버는 port 8081(http), 관리자 페이지 서버는 port 8082(http)로 접근한다.</ul><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image8.png" alt="image" /></p><h3 id="ssl-적용-1">SSL 적용</h3><ul><li><p>SSL 적용 이후 서버는 다음과 같이 포트가 변경된다.</p><li>사용자 페이지 서버는 port 80(https), port 8080(http)로 접근한다.<li>api 서버는 port 8081(http), port 8083(https)로 접근한다.<li>관리자 페이지 서버는 port 8082로 접근한다. 그러나 admin 페이지 서버는 학교에서 기본적으로 제공하는 포트 번호가 부가하므로 SSL을 적용하지 못하였다.</ul><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image9.png" alt="image" /></p><h2 id="project-lab-개발하면서">Project Lab. 개발하면서…</h2><ul><li>약 1년에 걸친 개발이 드디어 끝났다. 개인 프로젝트를 진행하면서 어려운 점도 많았고 힘들었지만 실제로 서버에 배포하여 웹페이지에 접속하니 그 감회가 새롭고 뿌듯하다. 고생을 모두 보상 받는 것 같은 느낌이다.<li>초기 목표는 모바일 페이지를 지원하지 않으며, 디자인 및 기능도 기존 웹페이지에 비하여 조금 나은 수준으로 개발하려고 하였다. 처음 예상한 프로젝트 배포 일시는 2020년 연말이었다. 그러나 연구실 졸업을 앞둔 박시형 박사님의 지속적인 도움 및 피드백?으로 일정이 변경되었다. 많은 요구사항 요청이 있었는데, 개발자 관점으로 개발이 불가능하고 난해한 요구사항을 제외한 대부분의 요구사항을 처리하려고 노력하였다. 물론 요구사항을 요청한 당사자에게는 요구사항을 많이 반영하지 않았다고 생각할 것이다. 해당 부분은 개발자와 이를 요구사항을 요청하는 사용자 간의 관점 차이라고 생각한다.<li>모바일 페이지 지원, 대대적인 디자인 변경, 추가적인 기능 개발 등을 마치고 최종적으로 교수님의 컨펌을 받았다. 다행히도 교수님께서는 새로 개발한 웹페이지를 만족하셨으며, 적은 요구사항을 요청하셨다.<li>교수님의 요구사항 반영 이후 개발 서버 테스트 단계를 걸쳐 2021.03.23에 운영 서버 배포를 완료하였다. 물론 서버 설정 과정도 쉽지는 않았다. 학교에서 사용 가능한 포트 번호는 매우 적었으며, 다른 포트를 열기 위해서는 교수님 서명과 더불어 지속적으로 갱신해야 했다. 또한 Nginx 웹서버 설정, SSL 적용, CORS 설정에 많이 고생하였다. 특히 CORS가 매우 골치 아팠다…<li>운영 서버 배포 이후 작은 수정이 있었으며, 2021.04.27 약 3주 동안은 이슈없이 연구실 인원들이 잘 사용하고 있다. 아마 앞으로 무조건 이슈가 발생할 것이다. 무슨 이슈가 발생할지 궁금하고 기대된다.<li>2021.06.16 모바일 반응형 버그와 로그인 실패한 LoginHistory 정보에 접근할 때 오류가 발생하는 이슈를 해결한 상태다.<li>프로젝트를 완료하고 나니 아쉬운점도 크다. 새로운 기술 스택을 사용하여 개발하려고 하였지만, 새로운 기술 스택을 늦게 발견하여 적용하지 못한 것도 있다. jwt 기반 로그인 구현, SPA 등이 있다. 또한 체계적이고 유지보수가 쉬우며 가독성이 뛰어난 코드를 개발하려고 노력 하였지만, 아직도 부족한 점이 많다고 느꼈다.<li><p>해당 프로젝트 종료 후 더 발전된 모습으로 다음 프로젝트인 Project. Rule을 개발하려고 한다. 이번 프로젝트에서 부족하다고 느낀점을 모두 보완하여 더 완성도를 높이도록 하겠다.</p><li><p>다음은 웹페이지 사용자와 개발자 간의 요구사항을 정리하고 소통에 사용한 스프레드시트와 zira다. 초기 스프레드시트를 사용하여 소통하였지만, 이슈 관리에 한계를 느껴 zira로 변경하였다. 스프레드시트와 zira에 작성되지 않은 요구사항은 매우 많으며, 이러한 요구사항들은 모두 카톡으로 소통하였다. 다들 프로세스를 준수하지 않게 되었다.</p><li>스프레드시트, jira: <a href="https://docs.google.com/spreadsheets/d/1FR1x1HDYq67m7YIMOM-yGH06QBDohw0gaWAJTnIYj-g/edit?usp=sharing">https://docs.google.com/spreadsheets/d/1FR1x1HDYq67m7YIMOM-yGH06QBDohw0gaWAJTnIYj-g/edit?usp=sharing</a></ul><p><img data-proofer-ignore data-src="/assets/img/2021-06-16-Project Lab23, 26/image10.png" alt="image" /></p><p><br /></p><ul><li><p>생각보다 프로젝트 규모가 커짐으로서, 직접적인 프로젝트 개발에 두 명의 친구들이 관심을 가지고 참여하기로 하였다. 나 또한 프로젝트 개발 속도를 진척시키고자 친구들의 참여를 환영하고 도와줬지만, 각자 사정으로 인하여 결국 참여하지 못했다. ‘Project Lab 20. 관리자 페이지 개발 - 3’ 페이지를 친구에게 맡길려고 한 나의 계획은 물거품이 되어, 내가 추후에 다 개발하게 되었다. 계획하는 것과 이를 실천하는 것은 전혀 다르다는 교훈을 배웠다.</p><li>개발한 코드와 문제 해결 방법을 블로그에 잘 정리하여 많은 사람들에게 도움도 주고 피드백도 받고 싶었으나, 잘 되지는 않았다. 글을 작성하는 것은 굉장히 어려우며, 잘 짜여진 글을 작성하는 일은 많은 시간과 노력 그리고 전문적인 지식이 필요하기 때문이다.<li><p>마지막으로 글을 작성하면서 아쉬운 점도 많지만 성취감도 크며, 고생한 날을 생각하니 묘한 기분이 든다.</p><li>github: <a href="https://github.com/scribnote5/lab">https://github.com/scribnote5/lab</a><li>배포 중인 서버 페이지: <a href="https://eslab.cnu.ac.kr/">https://eslab.cnu.ac.kr/</a><li>배포 중인 서버 관리자 페이지: <a href="http://eslab.cnu.ac.kr:8082/user/login">http://eslab.cnu.ac.kr:8082/user/login</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/web/'>Web</a>, <a href='/categories/project-lab/'>Project Lab</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1 - 끄적이판&url=https://scribnote5.github.io/posts/Project-Lab23,-26/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1 - 끄적이판&u=https://scribnote5.github.io/posts/Project-Lab23,-26/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Project Lab 23, 26. 개발 및 운영 서버 배포 및 후기 - 1 - 끄적이판&url=https://scribnote5.github.io/posts/Project-Lab23,-26/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/MISRA-C3/">함수 호출 인자 및 함수 매개변수의 한정자 관계</a><li><a href="/posts/Project-SW-Test-Forum17/">Project SW Test Forum 17. 유지보수 - 5</a><li><a href="/posts/Project-SW-Test-Forum16/">Project SW Test Forum 16. 유지보수 - 4</a><li><a href="/posts/MISRA-C-02-03/">MISRA C 2012_02_03 - 사용하지 않는 자료형 선언 제거</a><li><a href="/posts/MISRA-C-02-04/">MISRA C 2012_02_04 - 사용하지 않는 태그(struct, union, enum) 선언 제거</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Project-Lab0/"><div class="card-body"> <span class="timeago small" >Apr 14, 2020<i class="unloaded">2020-04-14T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project Lab 0. 연구실 홈페이지 개발 프로젝트 소개</h3><div class="text-muted small"><p> 연구실 홈페이지 개발 프로젝트를 소개한다. 계기 대학원 재학 중일 때 노후화된 연구실 홈페이지 유지보수를 담당하였다. 연구실 홈페이지는 난잡하게 개발되어 있었고 관련 문서가 하나도 없었기에 유지보수에 큰 어려움을 겪었다. 과거 회사 재직 중일 때 Spring을 사용하여 업무 시스템을 개발한 경험이 있다. 당시 초급 개발자로서 요구사항...</p></div></div></a></div><div class="card"> <a href="/posts/Project-Lab1-1/"><div class="card-body"> <span class="timeago small" >Jul 15, 2020<i class="unloaded">2020-07-15T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project Lab 1-1. 개발 환경 구축(IntelliJ)</h3><div class="text-muted small"><p> 연구실 홈페이지 개발 프로젝트의 인텔리제이 개발 환경 구축 과정을 소개한다. 이클립스를 사용하여 개발 환경을 구축 한다면 ‘Project Lab 1-1. 개발 환경 구축(IntelliJ)’ 게시글을 참고하면 된다. 개발 환경 Windows 10 64bit jdk11.0.7 IntelliJ Ultimate 2021.1 프로젝...</p></div></div></a></div><div class="card"> <a href="/posts/Project-Lab1-2/"><div class="card-body"> <span class="timeago small" >Jul 15, 2020<i class="unloaded">2020-07-15T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Project Lab 1-2. 개발 환경 구축(Eclipse)</h3><div class="text-muted small"><p> 연구실 홈페이지 개발 프로젝트의 이클립스 개발 환경 구축 과정을 소개한다. 인텔리제이 사용하여 개발 환경을 구축 한다면 ‘Project Lab 1-1. 개발 환경 구축(IntelliJ)’’ 게시글을 참고하면 된다. 개발 환경 Windows 10 64bit jdk11.0.7 Spring Tools 4 for Eclipse(sts...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Essay1/" class="btn btn-outline-primary" prompt="Older"><p>'File'에서 'Link'로의 변화</p></a> <a href="/posts/Project-SW-Test-Forum0/" class="btn btn-outline-primary" prompt="Newer"><p>Project SW Test Forum 0. 소프트웨어 테스트 포럼 소개</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://scribnote5.github.io/posts/Project-Lab23,-26/'; this.page.identifier = '/posts/Project-Lab23,-26/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://scribnote5-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (modeToggle !== null) { modeToggle.addEventListener('click', reloadDisqus); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/scribnote5">scribnote5</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
